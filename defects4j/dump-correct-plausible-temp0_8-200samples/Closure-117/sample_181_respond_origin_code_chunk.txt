  String getReadableJSTypeName(Node n, boolean dereference) {
    JSType type = getJSType(n);
    String qualifiedName = n.getQualifiedName();

    if (dereference) {
      ObjectType dereferenced = type.dereference();
      if (dereferenced != null) {
        type = dereferenced;
      }
    }

    // Don't show complex function names or anonymous types.
    if (qualifiedName != null) {
      return qualifiedName;
    } else if (type.isFunctionType()) {
      // Don't show complex function names.
      return "function";
    } else {
      return type.toString();
    }
  }

