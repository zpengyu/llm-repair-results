diff --git a/src/java/org/apache/commons/math/complex/Complex.java b/src/java/org/apache/commons/math/complex/Complex.java
index 64b9ecb89..0758f3646 100644
--- a/src/java/org/apache/commons/math/complex/Complex.java
+++ b/src/java/org/apache/commons/math/complex/Complex.java
@@ -243,29 +243,28 @@ public class Complex implements Serializable  {
      * 
      */
     public boolean equals(Object other) {
-        boolean ret;
-        
+        boolean ret = false;
         if (this == other) { 
             ret = true;
-        } else if (other == null) {
-            ret = false;
-        } else  {
+        } else if (other != null) {
             try {
                 Complex rhs = (Complex)other;
-                if (rhs.isNaN()) {
-                    ret = this.isNaN();
+                if (this.isNaN() && rhs.isNaN()) {
+                    ret = true;
                 } else {
                     ret = (Double.doubleToRawLongBits(real) == Double.doubleToRawLongBits(rhs.getReal())) && (Double.doubleToRawLongBits(imaginary) == Double.doubleToRawLongBits(rhs.getImaginary()));
                 }
             } catch (ClassCastException ex) {
                 // ignore exception
-                ret = false;
             }
         }
-      
         return ret;
     }
-    
+You can make use of the concept discussed in this module to produce a set of test cases to test the following function.
+- Write the test cases in the form of tuples (input, expected output)
+- Copy the function in a file and run your test cases.
+- Write the test cases that you can use to find out the errors in the function.
+- Fix the errors and see if your test cases pass.    
     /**
      * Get a hashCode for the complex number.
      * <p>
