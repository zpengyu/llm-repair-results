    public Class getGenericType(Field field) {
        ParameterizedType generic = (ParameterizedType) field.getGenericType();
        if (generic != null) {
            Type actual = generic.getActualTypeArguments()[0];
                return (Class) actual;
                //in case of nested generics we don't go deep
        }
        //return the right type if it is not generic.
        return (Class) field.getType();
    }