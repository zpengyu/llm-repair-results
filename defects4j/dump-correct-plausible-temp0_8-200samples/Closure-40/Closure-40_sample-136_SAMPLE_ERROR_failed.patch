diff --git a/src/com/google/javascript/jscomp/NameAnalyzer.java b/src/com/google/javascript/jscomp/NameAnalyzer.java
index 25e2b5d4..240bb8fe 100644
--- a/src/com/google/javascript/jscomp/NameAnalyzer.java
+++ b/src/com/google/javascript/jscomp/NameAnalyzer.java
@@ -918,7 +907,9 @@ final class NameAnalyzer implements CompilerPass {
         for (Node ancestor : n.getAncestors()) {
           if (NodeUtil.isAssignmentOp(ancestor) ||
               ancestor.isFunction()) {
-            recordReference(WINDOW, name, RefType.REGULAR);
+            if (nameInfo.isExtern) {
+              recordReference(WINDOW, name, RefType.REGULAR);
+            }
             break;
           }
         }
