diff --git a/src/com/google/javascript/jscomp/ProcessCommonJSModules.java b/src/com/google/javascript/jscomp/ProcessCommonJSModules.java
index f516e584..8c4c3366 100644
--- a/src/com/google/javascript/jscomp/ProcessCommonJSModules.java
+++ b/src/com/google/javascript/jscomp/ProcessCommonJSModules.java
@@ -187,9 +181,15 @@ public class ProcessCommonJSModules implements CompilerPass {
       script.addChildToFront(IR.exprResult(
           IR.call(IR.getprop(IR.name("goog"), IR.string("provide")),
               IR.string(moduleName))).copyInformationFromForTree(script));
-
+      // Rewrite module.exports to moduleName.module$exports.
+      Node moduleExportsProp = IR.getprop(IR.name(moduleName),
+          IR.string("module$exports"));
+      Node module = script.getFirstChild();
+      module.addChildToBack(
+          IR.exprResult(IR.assign(moduleExportsProp,
+              IR.getprop(IR.name("module"), IR.string("exports"))))
+              .copyInformationFromForTree(script));
       emitOptionalModuleExportsOverride(script, moduleName);
-
       // Rename vars to not conflict in global scope.
       NodeTraversal.traverse(compiler, script, new SuffixVarsCallback(
           moduleName));
