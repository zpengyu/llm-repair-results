    public ZipArchiveInputStream(InputStream inputStream,
                                 String encoding,
                                 boolean useUnicodeExtraFields,
                                 boolean allowStoredEntriesWithDataDescriptor) throws IOException {
        zipEncoding = ZipEncodingHelper.getZipEncoding(encoding);
        this.useUnicodeExtraFields = useUnicodeExtraFields;
        in = new PushbackInputStream(inputStream, buf.capacity());
        this.allowStoredEntriesWithDataDescriptor =
            allowStoredEntriesWithDataDescriptor;
        readFully(buf, 0, 4);
        final long sig = ZipLong.getValue(buf);
        if (sig != ENTRY_HEADER) {
            throw new IOException("Wrong Central Directory signature: "
                    + sig);
        }
        // haven't read anything so far
    }
