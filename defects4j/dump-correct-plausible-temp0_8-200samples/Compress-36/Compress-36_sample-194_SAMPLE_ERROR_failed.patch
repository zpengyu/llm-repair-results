diff --git a/src/main/java/org/apache/commons/compress/archivers/sevenz/SevenZFile.java b/src/main/java/org/apache/commons/compress/archivers/sevenz/SevenZFile.java
index 6bf6dc68..a55324a5 100644
--- a/src/main/java/org/apache/commons/compress/archivers/sevenz/SevenZFile.java
+++ b/src/main/java/org/apache/commons/compress/archivers/sevenz/SevenZFile.java
@@ -898,11 +898,10 @@ public class SevenZFile implements Closeable {
         return getCurrentStream().read();
     }
 
-    private InputStream getCurrentStream() throws IOException {
-        if (deferredBlockStreams.isEmpty()) {
+private InputStream getCurrentStream() throws IOException {
+        if (entries == null || currentIndex < 0 || currentIndex >= entries.length) {
             throw new IllegalStateException("No current 7z entry (call getNextEntry() first).");
         }
-        
         while (deferredBlockStreams.size() > 1) {
             // In solid compression mode we need to decompress all leading folder'
             // streams to get access to an entry. We defer this until really needed
