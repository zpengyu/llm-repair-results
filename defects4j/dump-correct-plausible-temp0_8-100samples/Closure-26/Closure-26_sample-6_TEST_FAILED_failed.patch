diff --git a/src/com/google/javascript/jscomp/ProcessCommonJSModules.java b/src/com/google/javascript/jscomp/ProcessCommonJSModules.java
index f516e584..72bb9fd7 100644
--- a/src/com/google/javascript/jscomp/ProcessCommonJSModules.java
+++ b/src/com/google/javascript/jscomp/ProcessCommonJSModules.java
@@ -218,7 +206,8 @@ public class ProcessCommonJSModules implements CompilerPass {
      * Rewrite module.exports to moduleName.module$exports.
      */
     private void visitModuleExports(Node prop) {
-      String moduleName = guessCJSModuleName(prop.getSourceFileName());
+      String moduleName = guessCJSModuleName(normalizeSourceName(
+          prop.getSourceFileName()));
       Node module = prop.getChildAtIndex(0);
       module.putProp(Node.ORIGINALNAME_PROP, "module");
       module.setString(moduleName);
